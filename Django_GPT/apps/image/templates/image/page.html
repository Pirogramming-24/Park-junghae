{% extends "base.html" %}
{% block content %}
<h2>이미지 생성</h2>

<form method="post">
  {% csrf_token %}
  <textarea name="prompt" rows="4" style="width:100%;" placeholder="이미지 프롬프트를 입력하세요.">{{ input_text }}</textarea>
  <div style="margin-top:8px;">
    <button type="submit">실행</button>
  </div>
</form>

{% if output %}
  <hr />
  <h3>결과</h3>
  <div style="white-space:pre-wrap;border:1px solid #ddd;padding:12px;">{{ output }}</div>
{% endif %}

{% if image_base64 %}
  <img src="data:image/png;base64,{{ image_base64 }}">
{% endif %}

{% if user.is_authenticated and histories %}
  <hr>
  <h3>내 이전 요약 기록</h3>

  <ul>
    {% for h in histories %}
      <li style="margin-bottom:12px;">
        <strong>입력:</strong><br>
        <pre>{{ h.input_text }}</pre>
        <strong>결과:</strong><br>
        <pre>{{ h.output_text }}</pre>
        <small>{{ h.created_at }}</small>
      </li>
    {% endfor %}
  </ul>
{% endif %}

{% endblock %}
